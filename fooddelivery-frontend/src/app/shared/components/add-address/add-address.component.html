<h2 mat-dialog-title>{{ isEditMode ? 'Edit Address' : 'Add New Address' }}</h2>
<mat-dialog-content>
    <form [formGroup]="addressForm">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <input formControlName="line1" placeholder="Address Line 1" class="p-2 border rounded w-full">
            <input formControlName="line2" placeholder="Address Line 2" class="p-2 border rounded w-full">
            <input formControlName="city" placeholder="City" class="p-2 border rounded w-full">
            <input formControlName="state" placeholder="State" class="p-2 border rounded w-full">
            <input formControlName="postalCode" placeholder="Postal Code" class="p-2 border rounded w-full">
        </div>

        <!-- Auto Detect Button -->
        <div class="mt-3 flex items-center">
            <button type="button" class="px-4 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700 transition"
                (click)="detectLocation()">
                üìç Auto Detect Location
            </button>
            <div *ngIf="accuracy" class="ml-4 flex items-center">
                <span class="font-semibold" [ngClass]="accuracyColor">Accuracy: {{ accuracy | number:'1.0-0' }}
                    meters</span>
            </div>
        </div>

        <div class="mt-4 rounded-lg overflow-hidden shadow border map-wrapper">
            <app-map (locationSelected)="onLocationPicked($event)" #mapRef></app-map>
        </div>
    </form>
</mat-dialog-content>
<mat-dialog-actions align="end" class="p-4">
    <button mat-button (click)="onCancel()" class="mr-2">Cancel</button>
    <button mat-raised-button color="primary" (click)="onAddAddress()" [disabled]="!addressForm.valid"
        class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400">
        Save
    </button>
</mat-dialog-actions>