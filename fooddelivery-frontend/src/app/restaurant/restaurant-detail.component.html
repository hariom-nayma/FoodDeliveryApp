@if (restaurant(); as r) {
<!-- Premium Banner -->
<div class="banner">
    <div class="banner-inner">
        <div class="banner-img-container">
            <img [src]="r.imageUrl || '/assets/placeholder-food.jpg'" [alt]="r.name" class="banner-img"
                onerror="this.src='/assets/placeholder-food.jpg'">
        </div>
        <div class="banner-content">
            <h1>{{ r.name }}</h1>
            <p>{{ r.description }}</p>
            <div class="meta-info">
                <span class="meta-item">â˜… {{ r.ratingAverage || 'New' }}</span>
                <span class="meta-item">ðŸšš {{ r.deliveryRadiusKm || '5' }} km</span>
                <span class="meta-item">ðŸ’° Min â‚¹{{ r.minOrderAmount || 150 }}</span>
            </div>
        </div>
    </div>
</div>

<div class="detail-container">
    <div class="menu-layout">
        <!-- Categories Sidebar -->
        <div class="categories">
            <h3>Menu</h3>
            <ul class="cat-list">
                @for (cat of categories(); track cat.id) {
                <li><a [href]="'#cat-' + cat.id" class="cat-link">{{ cat.name }}</a></li>
                }
            </ul>
        </div>

        <!-- Menu Items -->
        <div class="items">
            @for (cat of categories(); track cat.id) {
            <div [id]="'cat-' + cat.id" class="category-section">
                <h2 class="category-title">{{ cat.name }}</h2>

                @for (item of getItemsByCategory(cat.id); track item.id) {
                <div class="menu-item-card">
                    <div class="item-info">
                        <div [class]="item.foodType === 'VEG' ? 'veg-icon' : 'non-veg-icon'">
                            {{ item.foodType === 'VEG' ? 'ðŸŸ¢ VEG' : 'ðŸ”´ NON-VEG' }}
                        </div>
                        <h4 class="item-name">{{ item.name }}</h4>
                        <p class="item-price">â‚¹{{ item.basePrice }}</p>
                        <p class="item-desc">{{ item.description }}</p>
                    </div>
                    <div class="item-action-container">
                        <!-- TODO: Add image here if available -->
                        <button class="add-btn" (click)="addToCart(item)">ADD</button>
                    </div>
                </div>
                }
            </div>
            }
        </div>
    </div>

    <!-- Sticky Cart Summary Footer -->
    @if (cartService.cart(); as cart) {
    @if (cart.items.length > 0) {
    <a routerLink="/cart" class="sticky-cart-footer">
        <div class="cart-info">
            <span class="cart-count">{{ cart.items.length }} ITEM{{ cart.items.length > 1 ? 'S' : '' }}</span>
            <span class="cart-total">â‚¹{{ cart.total }} plus taxes</span>
        </div>
        <div class="view-cart-text">
            View Cart âžœ
        </div>
    </a>
    }
    }
</div>
} @else {
<div style="padding: 4rem; text-align: center;">Loading...</div>
}

@if (selectedItemForCustomization()) {
<app-customize-item-dialog [item]="selectedItemForCustomization()!" (close)="selectedItemForCustomization.set(null)"
    (addToCart)="handleCustomizationComplete($event)">
</app-customize-item-dialog>
}