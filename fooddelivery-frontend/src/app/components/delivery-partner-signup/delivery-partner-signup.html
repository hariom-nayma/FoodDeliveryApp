<div class="page-container">
  <div class="signup-card">
    
    <!-- Header -->
    <div class="card-header">
      <h2>Join the Fleet</h2>
      <p>Deliver happiness and earn on your own schedule.</p>
    </div>

    <!-- Form Body -->
    <div class="form-content">
      
      <!-- Status Messages -->
      <div *ngIf="message()" class="status-message" 
           [class.success]="isSuccess()" 
           [class.error]="!isSuccess()">
        <span>{{ isSuccess() ? 'âœ…' : 'âš ï¸' }}</span>
        {{ message() }}
      </div>

      <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
        
        <!-- Section: Vehicle Selection -->
        <h3 class="section-title">Select Your Ride</h3>
        <div class="vehicle-grid">
          
          <div class="vehicle-card" 
               [class.selected]="signupForm.get('vehicleType')?.value === 'BICYCLE'"
               (click)="selectVehicle('BICYCLE')">
            <div class="vehicle-icon">ğŸš²</div>
            <div class="vehicle-name">Bicycle</div>
            <div class="vehicle-desc">Eco-friendly. No license needed.</div>
          </div>

          <div class="vehicle-card" 
               [class.selected]="signupForm.get('vehicleType')?.value === 'BIKE'"
               (click)="selectVehicle('BIKE')">
            <div class="vehicle-icon">ğŸï¸</div>
            <div class="vehicle-name">Motorbike</div>
            <div class="vehicle-desc">Fast deliveries. License required.</div>
          </div>

          <div class="vehicle-card" 
               [class.selected]="signupForm.get('vehicleType')?.value === 'SCOOTER'"
               (click)="selectVehicle('SCOOTER')">
            <div class="vehicle-icon">ğŸ›µ</div>
            <div class="vehicle-name">Scooter</div>
            <div class="vehicle-desc">Convenient & agile.</div>
          </div>

        </div>
        <!-- Hidden input to bind validator, though handled by click -->
        <input type="hidden" formControlName="vehicleType">


        <!-- Section: Documents -->
        <h3 class="section-title">Upload Documents</h3>
        <div class="documents-grid">
          
          <!-- License -->
          <div class="upload-card" [class.has-file]="!!licenseFile">
            <div class="icon-box">
              <span *ngIf="!licenseFile">ğŸ†”</span>
              <span *ngIf="licenseFile">âœ“</span>
            </div>
            <div class="upload-info">
              <span class="upload-label">Driving License</span>
              <span class="upload-helper">{{ licenseFile ? licenseFile.name : 'Click to browse' }}</span>
            </div>
            <input type="file" class="file-input" (change)="onFileChange($event, 'license')" accept="image/*">
          </div>

          <!-- Aadhar -->
          <div class="upload-card" [class.has-file]="!!aadharFile">
            <div class="icon-box">
              <span *ngIf="!aadharFile">ğŸ’³</span>
              <span *ngIf="aadharFile">âœ“</span>
            </div>
            <div class="upload-info">
              <span class="upload-label">Aadhar Card</span>
              <span class="upload-helper">{{ aadharFile ? aadharFile.name : 'Identity Proof' }}</span>
            </div>
            <input type="file" class="file-input" (change)="onFileChange($event, 'aadhar')" accept="image/*">
          </div>

          <!-- RC -->
          <div class="upload-card" [class.has-file]="!!rcFile">
            <div class="icon-box">
              <span *ngIf="!rcFile">ğŸ“„</span>
              <span *ngIf="rcFile">âœ“</span>
            </div>
            <div class="upload-info">
              <span class="upload-label">Vehicle RC</span>
              <span class="upload-helper">{{ rcFile ? rcFile.name : 'Registration Cert' }}</span>
            </div>
            <input type="file" class="file-input" (change)="onFileChange($event, 'rc')" accept="image/*">
          </div>

        </div>

        <!-- Submit -->
        <div class="submit-section">
          <button type="submit" class="btn-submit" [disabled]="isLoading()">
            {{ isLoading() ? 'Processing...' : 'Submit Application' }}
          </button>
          <p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.85rem;">
            By joining, you agree to our Partner Terms & Conditions.
          </p>
        </div>

      </form>
    </div>
  </div>
</div>